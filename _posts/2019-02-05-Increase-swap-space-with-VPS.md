---
layout: post
title: VPSでスワップ領域を増やす
tags: VPS
categories: server
date: 2019-02-05 05:08:54 +0900
---

VPSで格安のものになってくると、問題となってくるのがスペックになります。

昔のVPSに比べると、メモリが512MBに増えておりかなり使えるものになってきましたが、それでも不足してしまうという現実があります。

そこで、気休め程度になってしまいますが、スワップ領域を増やしてみました。

### １．確認する

最初にSWAP領域があるかないか調べるために以下のコマンドを実行します。

    free -m

total used free shared buff/cache available  
Mem: 481 158 104 0 218 310  
Swap: 0 0 0

当方のVPSではこのようになっていました。

Memがお分かりの通り、実メモリです。

Swapがスワップ領域です。

Total 0となっていると、その領域は存在しないという意味です。

### ２．スワップ領域を作る

    dd if=/dev/zero of=/swapfile bs=1M count=4096

### ３．適応させていく

#### 3.1.スワップの権限を変更する

    chmod 600 /swapfile

#### 3.2.スワップを適応する

    mkswap /swapfile
    swapon /swapfile

### ４．スワップを恒久化する

この操作を行わないと再起動で元通りになってしまうので、次回以降の起動のためにこれから設定していきます。

HDDのマウントなどで使われるfstabに追記していきます。

/etc/fstabを開き、以下のものを最下位に追記します。

    #Swap Area
    /swapfile       swap          swap    defaults   0 0

これでスワップ領域の設定が完了します。

まとめ
---

このような方法でスワップ領域を簡単に作ることができます。

メモリ不足の根本的な対策は違うプランにして増やすべきですが、私のようにお金がないやほかの諸々の事情がある場合はこれで乗り切れると思います。

今回はこれで以上です。
